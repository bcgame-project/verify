<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Slots verify</title>
  <link rel="stylesheet" href="./lib/main.css">
  <link rel="stylesheet" href="./lib/bootstrap/css/bootstrap.min.css">
  <script src="./lib/vue.min.js"></script>
  <script src="./lib/crypto-js.js"></script>
  <script src="./lib/tools.js"></script>
</head>

<body>
  <div id="app" class="main">
    <h1 class="text-center pb-5">Twist verify</h1>
    <hr>
    <form class="py-5">
      <h2 class="text-center">Input</h2>
      <div class="form-group">
        <input v-model.lazy="client_seed" class="form-control" placeholder="Client Seed">
      </div>
      <div class="form-group">
        <input v-model.lazy="server_seed" class="form-control" placeholder="Server Seed">
      </div>
      <div class="form-group">
        <input v-model.lazy="server_seed_hash" class="form-control" placeholder="Server Seed Hash">
      </div>
      <div class="row">
        <div class="form-group col">
          <input v-model.lazy.number="layers[0]" class="form-control" placeholder="Left">
        </div>
        <div class="form-group col">
          <input v-model.lazy.number="layers[1]" class="form-control" placeholder="Middle">
        </div>
        <div class="form-group col">
          <input v-model.lazy.number="layers[2]" class="form-control" placeholder="Right">
        </div>
      </div>
      <div class="form-group">
        <input v-model.lazy.number="nonce" class="form-control" placeholder="Nonce">
      </div>
    </form>
    <hr>
    <form class="py-5">
      <h2 class="text-center pb-5">Output</h2>
      <div class="form-group">
        <label>sha256(server_seed)</label>
        <input class="form-control" readonly :value="sha256(server_seed)">
      </div>
      <div class="form-group">
        <label>hmac_sha512(client_seed:nonce, server_seed)</label>
        <input class="form-control" readonly :value="result_hash">
      </div>
      <div class="form-group">
        <label>lucky</label>
        <input class="form-control" readonly :value="lucky">
      </div>
    </form>
    <hr>
    <form class="py-5">
      <h2 class="text-center pb-5">Results</h2>
      <h5>Final Result</h5>
      <div class="form-group" style="overflow-x: auto;">
        <table class="table table-sm table-bordered">
          <tbody>
            <tr>
              <th>Green gem</th>
              <th>Purple gem</th>
              <th>Red gem</th>
              <th>Dark gem</th>
              <th>Skull</th>
            </tr>
            <tr>
              <td v-for="(num, index) in layerInfo" :class="{'bg-success': index == luckyIndex}">{{ num[0] }}</td>
            </tr>
            <tr>
              <td v-for="(num, index) in layerInfo" :class="{'bg-success': index == luckyIndex}">[{{ num[1].join(',')
                }})</td>
            </tr>
            <tr>
              <td v-for="(num, index) in layerInfo" :class="{'bg-success': index == luckyIndex}">
                <div v-if="index == luckyIndex">{{ lucky }}</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <h5 v-if="isTop">Roulette Result</h5>
      <div v-if="isTop" class="form-group">
        <div class="form-group">
          <label>substr(hmac_sha512(client_seed:nonce, server_seed), 10)%5</label>
          <input class="form-control" readonly :value="top_lucky">
        </div>
      </div>
      <h5>Lucky Algorithm</h5>
      <pre class="alert alert-info">
        function getLucky(serverSeed, clientSeed, nonce) {
          var hash = hmac_sha512(client_seed + ":" +nonce, server_seed);
          var index = 0;
          do {
            var lucky = parseInt(hash.substr(index, 5), 16);
            index += 5;
          } while (lucky >= 1e6);
          return lucky;
        }
      </pre>
      <h5>Layer Data</h5>
      <div id="probability" class="form-group">
        <table class="table table-sm table-bordered">
          <tbody>
            <tr>
              <th>Layer</th>
              <th>Green gem</th>
              <th>Purple gem</th>
              <th>Red gem</th>
              <th>Dark gem</th>
              <th>Skull</th>
            </tr>
            <tr v-for="item in layerData" :key="item[0]">
              <td>{{ formatLayerString(item[0]) }}</td>
              <td>{{ item[1] }}</td>
              <td>{{ item[2] }}</td>
              <td>{{ item[3] }}</td>
              <td>{{ item[4] }}</td>
              <td>{{ item[5] }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>
</body>

</html>
<script>
  let qs = tools.queryString();
  var data = [
    [0, 206250, 82500, 132000, 144812, 434438],
    [1, 275747, 110298, 80217, 133434, 400304],
    [2, 338640, 135456, 63744, 115539, 346621],
    [3, 386556, 154622, 51540, 101820, 305462],
    [4, 429452, 171780, 41643, 89280, 267845],
    [5, 469728, 187891, 35788, 76647, 229946],
    [10, 300720, 53461, 192460, 113339, 340020],
    [11, 363871, 64688, 105853, 116396, 349192],
    [12, 418309, 74366, 78740, 107145, 321440],
    [13, 462504, 82223, 61667, 98401, 295205],
    [14, 504093, 89616, 48881, 89352, 268058],
    [15, 544689, 96833, 41500, 79244, 237734],
    [20, 371474, 38345, 237743, 88108, 264330],
    [21, 438799, 45295, 127650, 97063, 291193],
    [22, 486736, 50243, 91620, 92849, 278552],
    [23, 525469, 54242, 70062, 87556, 262671],
    [24, 562111, 58024, 54507, 81339, 244019],
    [25, 597869, 61715, 45551, 73715, 221150],
    [30, 426461, 27850, 272935, 68188, 204566],
    [31, 503533, 32883, 146482, 79274, 237828],
    [32, 548279, 35805, 103205, 78177, 234534],
    [33, 582897, 38066, 77719, 75329, 225989],
    [34, 614903, 40156, 59627, 71328, 213986],
    [35, 645279, 42140, 49164, 65853, 197564],
    [40, 470419, 21504, 301068, 51751, 155258],
    [41, 559974, 25598, 162901, 62881, 188646],
    [42, 604071, 27614, 113707, 63651, 190957],
    [43, 636051, 29076, 84806, 62516, 187551],
    [44, 664282, 30367, 64415, 60233, 180703],
    [45, 689591, 31524, 52540, 56586, 169759],
    [50, 501214, 16200, 320777, 40451, 121358],
    [51, 602434, 19472, 175253, 50709, 152132],
    [52, 647798, 20938, 121938, 52330, 156996],
    [53, 678913, 21944, 90521, 52155, 156467],
    [54, 705068, 22790, 68370, 50942, 152830],
    [55, 726979, 23498, 55388, 48533, 145602],
    [60, 526423, 12478, 336910, 31047, 93142],
    [61, 639109, 15149, 185922, 39954, 119866],
    [62, 686726, 16277, 129266, 41932, 125799],
    [63, 717894, 17016, 95719, 42342, 127029],
    [64, 742841, 17608, 72033, 41879, 125639],
    [65, 762151, 18065, 58068, 40428, 121288],
    [70, 545343, 9184, 349019, 24112, 72342],
    [71, 667857, 11248, 194285, 31652, 94958],
    [72, 718107, 12094, 135173, 33656, 100970],
    [73, 750000, 12631, 100000, 34342, 103027],
    [74, 774586, 13045, 75111, 34314, 102944],
    [75, 792327, 13344, 60367, 33490, 100472],
    [100, 121046, 102889, 164623, 152860, 458582],
    [101, 158289, 134545, 97851, 152328, 456987],
    [102, 194804, 165583, 77921, 140422, 421270],
    [103, 225513, 191686, 63895, 129726, 389180],
    [104, 255372, 217066, 52622, 118734, 356206],
    [105, 285694, 242840, 46255, 106302, 318909],
    [110, 170321, 64343, 231636, 133424, 400276],
    [111, 211700, 79975, 130869, 144363, 433093],
    [112, 248788, 93986, 99515, 139427, 418284],
    [113, 281213, 106236, 79677, 133218, 399656],
    [114, 313940, 118599, 64690, 125692, 377079],
    [115, 348270, 131568, 56386, 115943, 347833],
    [120, 213679, 46871, 290604, 112210, 336636],
    [121, 262980, 57686, 162569, 129190, 387575],
    [122, 299977, 65801, 119991, 128557, 385674],
    [123, 331792, 72780, 94007, 125354, 376067],
    [124, 363764, 79793, 74957, 120371, 361115],
    [125, 397023, 87089, 64280, 112901, 338707],
    [130, 252132, 34989, 342900, 92494, 277485],
    [131, 313146, 43457, 193581, 112453, 337363],
    [132, 351433, 48770, 140573, 114805, 344419],
    [133, 382872, 53133, 108480, 113878, 341637],
    [134, 413587, 57395, 85224, 110947, 332847],
    [135, 444482, 61683, 71963, 105467, 316405],
    [140, 286476, 27829, 389607, 74021, 222067],
    [141, 362352, 35199, 223999, 94612, 283838],
    [142, 403588, 39205, 161435, 98942, 296830],
    [143, 435389, 42294, 123360, 99738, 299219],
    [144, 464997, 45171, 95817, 98503, 295512],
    [145, 493036, 47894, 79824, 94810, 284436],
    [150, 312746, 21481, 425334, 60109, 180330],
    [151, 403350, 27704, 249344, 79900, 239702],
    [152, 448789, 30825, 179515, 85217, 255654],
    [153, 482038, 33109, 136577, 87068, 261208],
    [154, 511520, 35134, 105404, 86985, 260957],
    [155, 537569, 36923, 87035, 84617, 253856],
    [160, 335793, 16914, 456679, 47653, 142961],
    [161, 441974, 22262, 273220, 65635, 196909],
    [162, 492795, 24822, 197118, 71316, 213949],
    [163, 528396, 26615, 149712, 73819, 221458],
    [164, 558458, 28129, 115076, 74583, 223754],
    [165, 582976, 29364, 94386, 73318, 219956],
    [170, 354060, 12671, 481522, 37936, 113811],
    [171, 474553, 16984, 293360, 53775, 161328],
    [172, 531135, 19009, 212454, 59350, 178052],
    [173, 569696, 20389, 161414, 62125, 186376],
    [174, 601071, 21512, 123857, 63389, 190171],
    [175, 624884, 22364, 101171, 62894, 188687],
    [200, 90250, 124094, 198551, 146775, 440330],
    [201, 114767, 157805, 114767, 153164, 459497],
    [202, 138433, 190346, 89574, 145411, 436236],
    [203, 159050, 218694, 72898, 137339, 412019],
    [204, 179744, 247149, 59914, 128297, 384896],
    [205, 201393, 276916, 52746, 117235, 351710],
    [210, 120595, 73697, 265310, 135098, 405300],
    [211, 150898, 92215, 150898, 151496, 454493],
    [212, 177230, 108307, 114678, 149945, 449840],
    [213, 200800, 122711, 92033, 146113, 438343],
    [214, 225217, 137632, 75072, 140519, 421560],
    [215, 251523, 153708, 65875, 132223, 396671],
    [220, 148622, 52737, 326970, 117917, 353754],
    [221, 186571, 66202, 186571, 140163, 420493],
    [222, 214663, 76170, 138899, 142566, 427702],
    [223, 239279, 84905, 109669, 141536, 424611],
    [224, 264573, 93880, 88191, 138338, 415018],
    [225, 291509, 103438, 76347, 132176, 396530],
    [230, 174876, 39258, 384728, 100284, 300854],
    [231, 223231, 50113, 223231, 125855, 377570],
    [232, 253972, 57014, 164335, 131169, 393510],
    [233, 279727, 62795, 128208, 132317, 396953],
    [234, 305423, 68564, 101807, 131051, 393155],
    [235, 331820, 74490, 86905, 126695, 380090],
    [240, 199546, 31357, 439001, 82523, 247573],
    [241, 261142, 41036, 261142, 109169, 327511],
    [242, 295896, 46498, 191462, 116535, 349609],
    [243, 323389, 50818, 148220, 119393, 358180],
    [244, 349566, 54931, 116522, 119745, 359236],
    [245, 374867, 58907, 98179, 117011, 351036],
    [250, 219315, 24368, 482493, 68455, 205369],
    [251, 294466, 32718, 294466, 94587, 283763],
    [252, 334256, 37139, 216283, 103080, 309242],
    [253, 364309, 40478, 166975, 107059, 321179],
    [254, 391642, 43515, 130547, 108573, 325723],
    [255, 416329, 46258, 109038, 107093, 321282],
    [260, 237322, 19337, 522108, 55308, 165925],
    [261, 327389, 26676, 327389, 79636, 238910],
    [262, 373532, 30435, 241697, 88583, 265753],
    [263, 407114, 33172, 186594, 93279, 279841],
    [264, 436316, 35551, 145438, 95673, 287022],
    [265, 460715, 37539, 120663, 95270, 285813],
    [270, 252066, 14593, 554547, 44698, 134096],
    [271, 356417, 20634, 356417, 66632, 199900],
    [272, 409460, 23705, 264944, 75472, 226419],
    [273, 447238, 25892, 204984, 80471, 241415],
    [274, 479008, 27732, 159669, 83397, 250194],
    [275, 503777, 29166, 131941, 83778, 251338],
    [300, 77346, 145024, 232038, 136397, 409195],
    [301, 96522, 180979, 131621, 147719, 443159],
    [302, 113910, 213582, 100509, 142999, 429000],
    [303, 129208, 242266, 80755, 136942, 410829],
    [304, 144738, 271385, 65790, 129521, 388566],
    [305, 161135, 302128, 57548, 119797, 359392],
    [310, 99034, 82528, 297102, 130333, 391003],
    [311, 124334, 103611, 169546, 150626, 451883],
    [312, 145025, 120854, 127964, 151538, 454619],
    [313, 163575, 136312, 102234, 149469, 448410],
    [314, 182916, 152430, 83143, 145377, 436134],
    [315, 203875, 169896, 72812, 138353, 415064],
    [320, 119086, 57622, 357260, 116507, 349525],
    [321, 151436, 73275, 206504, 142195, 426590],
    [322, 174477, 84424, 153950, 146786, 440363],
    [323, 194651, 94186, 121657, 147376, 442130],
    [324, 215466, 104257, 97939, 145584, 436754],
    [325, 237707, 115019, 84895, 140594, 421785],
    [330, 138339, 42348, 415018, 101073, 303222],
    [331, 179783, 55035, 245159, 130005, 390018],
    [332, 205818, 63005, 181604, 137392, 412181],
    [333, 227668, 69694, 142292, 140086, 420260],
    [334, 249557, 76395, 113435, 140152, 420461],
    [335, 272096, 83294, 97177, 136857, 410576],
    [340, 156912, 33624, 470737, 84681, 254046],
    [341, 209804, 44958, 286097, 114784, 344357],
    [342, 239979, 51424, 211746, 124212, 372639],
    [343, 264034, 56578, 165021, 128591, 385776],
    [344, 287087, 61518, 130494, 130225, 390676],
    [345, 309435, 66307, 110512, 128436, 385310],
    [350, 172234, 26096, 516703, 71241, 213726],
    [351, 236992, 35907, 323171, 100982, 302948],
    [352, 272175, 41238, 240155, 111607, 334825],
    [353, 299126, 45322, 186953, 117149, 351450],
    [354, 323890, 49074, 147222, 119953, 359861],
    [355, 346376, 52481, 123705, 119359, 358079],
    [360, 186516, 20724, 559550, 58302, 174908],
    [361, 264575, 29397, 360784, 86310, 258934],
    [362, 306071, 34007, 270062, 97464, 292396],
    [363, 336891, 37432, 210556, 103779, 311342],
    [364, 364086, 40454, 165493, 107491, 322476],
    [365, 387013, 43001, 138219, 107941, 323826],
    [370, 198471, 15668, 595415, 47611, 142835],
    [371, 289562, 22860, 394858, 73179, 219541],
    [372, 338003, 26684, 298238, 84268, 252807],
    [373, 373397, 29478, 233373, 90937, 272815],
    [374, 403727, 31873, 183512, 95221, 285667],
    [375, 427676, 33763, 152741, 96454, 289366]
  ]
  const data96 = [
    [
      0,
      200000,
      79999,
      127999,
      148002,
      444000
    ],
    [
      1,
      270625,
      108249,
      78726,
      135602,
      406798
    ],
    [
      2,
      334343,
      133737,
      62935,
      117247,
      351738
    ],
    [
      3,
      382837,
      153134,
      51044,
      103247,
      309738
    ],
    [
      4,
      426227,
      170490,
      41330,
      90490,
      271463
    ],
    [
      5,
      466969,
      186787,
      35579,
      77667,
      232998
    ],
    [
      10,
      296172,
      52652,
      189549,
      115407,
      346220
    ],
    [
      11,
      359697,
      63945,
      104638,
      117931,
      353789
    ],
    [
      12,
      414580,
      73702,
      78038,
      108420,
      325260
    ],
    [
      13,
      459132,
      81622,
      61216,
      99509,
      298521
    ],
    [
      14,
      501064,
      89077,
      48587,
      90318,
      270954
    ],
    [
      15,
      542013,
      96356,
      41297,
      80084,
      240250
    ],
    [
      20,
      368025,
      37988,
      235535,
      89614,
      268838
    ],
    [
      21,
      435393,
      44942,
      126659,
      98252,
      294754
    ],
    [
      22,
      483570,
      49915,
      91025,
      93873,
      281617
    ],
    [
      23,
      522532,
      53937,
      69670,
      88466,
      265395
    ],
    [
      24,
      559410,
      57744,
      54244,
      82151,
      246451
    ],
    [
      25,
      595427,
      61462,
      45366,
      74437,
      223308
    ],
    [
      30,
      423819,
      27678,
      271243,
      69316,
      207944
    ],
    [
      31,
      500779,
      32704,
      145680,
      80210,
      240627
    ],
    [
      32,
      545634,
      35634,
      102707,
      79007,
      237018
    ],
    [
      33,
      580389,
      37904,
      77384,
      76080,
      228243
    ],
    [
      34,
      612550,
      40004,
      59397,
      72013,
      216036
    ],
    [
      35,
      643117,
      42000,
      49000,
      66471,
      199412
    ],
    [
      40,
      468427,
      21414,
      299792,
      52592,
      157775
    ],
    [
      41,
      557792,
      25500,
      162266,
      63611,
      190831
    ],
    [
      42,
      601931,
      27517,
      113305,
      64312,
      192935
    ],
    [
      43,
      633947,
      28981,
      84525,
      63137,
      189410
    ],
    [
      44,
      662307,
      30277,
      64222,
      60798,
      182396
    ],
    [
      45,
      687739,
      31440,
      52400,
      57106,
      171315
    ],
    [
      50,
      499688,
      16151,
      319799,
      41092,
      123270
    ],
    [
      51,
      600706,
      19417,
      174750,
      51282,
      153845
    ],
    [
      52,
      646042,
      20882,
      121608,
      52868,
      158600
    ],
    [
      53,
      677188,
      21889,
      90290,
      52659,
      157974
    ],
    [
      54,
      703346,
      22734,
      68202,
      51430,
      154288
    ],
    [
      55,
      725399,
      23447,
      55269,
      48972,
      146913
    ],
    [
      60,
      525277,
      12451,
      336176,
      31524,
      94572
    ],
    [
      61,
      637733,
      15116,
      185521,
      40408,
      121222
    ],
    [
      62,
      685321,
      16244,
      129001,
      42360,
      127074
    ],
    [
      63,
      716587,
      16985,
      95543,
      42722,
      128163
    ],
    [
      64,
      741475,
      17575,
      71899,
      42262,
      126789
    ],
    [
      65,
      760836,
      18034,
      57969,
      40792,
      122369
    ],
    [
      70,
      544422,
      9170,
      348429,
      24496,
      73483
    ],
    [
      71,
      666697,
      11229,
      193947,
      32032,
      96095
    ],
    [
      72,
      716863,
      12074,
      134939,
      34032,
      102092
    ],
    [
      73,
      748860,
      12613,
      99846,
      34671,
      104010
    ],
    [
      74,
      773462,
      13028,
      75001,
      34627,
      103882
    ],
    [
      75,
      791130,
      13325,
      60277,
      33817,
      101451
    ],
    [
      100,
      118426,
      100661,
      161058,
      154965,
      464890
    ],
    [
      101,
      155933,
      132542,
      96394,
      153783,
      461348
    ],
    [
      102,
      192691,
      163786,
      77076,
      141612,
      424835
    ],
    [
      103,
      223589,
      190050,
      63349,
      130753,
      392259
    ],
    [
      104,
      253627,
      215582,
      52262,
      119633,
      358896
    ],
    [
      105,
      284142,
      241520,
      46003,
      107085,
      321250
    ],
    [
      110,
      168177,
      63533,
      228719,
      134893,
      404678
    ],
    [
      111,
      209595,
      79179,
      129566,
      145416,
      436244
    ],
    [
      112,
      246806,
      93237,
      98722,
      140309,
      420926
    ],
    [
      113,
      279346,
      105529,
      79147,
      133995,
      401983
    ],
    [
      114,
      312193,
      117938,
      64330,
      126385,
      379154
    ],
    [
      115,
      346665,
      130961,
      56126,
      116562,
      349686
    ],
    [
      120,
      211913,
      46484,
      288201,
      113351,
      340051
    ],
    [
      121,
      261131,
      57280,
      161425,
      130041,
      390123
    ],
    [
      122,
      298183,
      65408,
      119272,
      129284,
      387853
    ],
    [
      123,
      330065,
      72401,
      93517,
      126005,
      378012
    ],
    [
      124,
      362118,
      79432,
      74618,
      120959,
      362873
    ],
    [
      125,
      395484,
      86751,
      64030,
      113434,
      340301
    ],
    [
      130,
      250689,
      34789,
      340936,
      93397,
      280189
    ],
    [
      131,
      311550,
      43235,
      192594,
      113156,
      339465
    ],
    [
      132,
      349842,
      48549,
      139936,
      115419,
      346254
    ],
    [
      133,
      381317,
      52917,
      108039,
      114432,
      343295
    ],
    [
      134,
      412085,
      57187,
      84914,
      111454,
      334360
    ],
    [
      135,
      443053,
      61485,
      71731,
      105933,
      317798
    ],
    [
      140,
      285328,
      27717,
      388045,
      74729,
      224181
    ],
    [
      141,
      361012,
      35070,
      223169,
      95188,
      285561
    ],
    [
      142,
      402223,
      39073,
      160889,
      99455,
      298360
    ],
    [
      143,
      434022,
      42162,
      122972,
      100212,
      300632
    ],
    [
      144,
      463680,
      45043,
      95545,
      98935,
      296797
    ],
    [
      145,
      491762,
      47771,
      79618,
      95212,
      285637
    ],
    [
      150,
      311819,
      21418,
      424072,
      60673,
      182018
    ],
    [
      151,
      402223,
      27627,
      248645,
      80377,
      241128
    ],
    [
      152,
      447618,
      30745,
      179047,
      85649,
      256941
    ],
    [
      153,
      480826,
      33026,
      136233,
      87479,
      262436
    ],
    [
      154,
      510349,
      35054,
      105162,
      87359,
      262076
    ],
    [
      155,
      536416,
      36845,
      86847,
      84973,
      254919
    ],
    [
      160,
      335061,
      16877,
      455681,
      48095,
      144286
    ],
    [
      161,
      441049,
      22216,
      272647,
      66022,
      198066
    ],
    [
      162,
      491815,
      24773,
      196725,
      71672,
      215015
    ],
    [
      163,
      527369,
      26564,
      149420,
      74161,
      222486
    ],
    [
      164,
      557454,
      28080,
      114868,
      74900,
      224698
    ],
    [
      165,
      581993,
      29316,
      94226,
      73616,
      220849
    ],
    [
      170,
      353479,
      12650,
      480731,
      38285,
      114855
    ],
    [
      171,
      473797,
      16956,
      292891,
      54089,
      162267
    ],
    [
      172,
      530322,
      18979,
      212128,
      59643,
      178928
    ],
    [
      173,
      568857,
      20358,
      161175,
      62402,
      187208
    ],
    [
      174,
      600225,
      21480,
      123682,
      63653,
      190960
    ],
    [
      175,
      624044,
      22333,
      101035,
      63146,
      189442
    ],
    [
      200,
      88775,
      122064,
      195303,
      148466,
      445392
    ],
    [
      201,
      113372,
      155885,
      113371,
      154343,
      463029
    ],
    [
      202,
      137142,
      188570,
      88739,
      146388,
      439161
    ],
    [
      203,
      157848,
      217039,
      72346,
      138193,
      414574
    ],
    [
      204,
      178631,
      245617,
      59543,
      129053,
      387156
    ],
    [
      205,
      200381,
      275523,
      52480,
      117904,
      353712
    ],
    [
      210,
      119318,
      72916,
      262498,
      136318,
      408950
    ],
    [
      211,
      149592,
      91417,
      149591,
      152351,
      457049
    ],
    [
      212,
      175969,
      107536,
      113862,
      150659,
      451974
    ],
    [
      213,
      199587,
      121969,
      91476,
      146743,
      440225
    ],
    [
      214,
      224059,
      136925,
      74686,
      141083,
      423247
    ],
    [
      215,
      250440,
      153046,
      65591,
      132731,
      398192
    ],
    [
      220,
      147529,
      52349,
      324563,
      118890,
      356669
    ],
    [
      221,
      185385,
      65781,
      185384,
      140863,
      422587
    ],
    [
      222,
      213484,
      75752,
      138136,
      143158,
      429470
    ],
    [
      223,
      238124,
      84495,
      109139,
      142061,
      426181
    ],
    [
      224,
      263454,
      93483,
      87817,
      138812,
      416434
    ],
    [
      225,
      290444,
      103061,
      76068,
      132607,
      397820
    ],
    [
      230,
      173956,
      39051,
      382702,
      101074,
      303217
    ],
    [
      231,
      222176,
      49875,
      222175,
      126444,
      379330
    ],
    [
      232,
      252898,
      56772,
      163640,
      131673,
      395017
    ],
    [
      233,
      278657,
      62554,
      127717,
      132768,
      398304
    ],
    [
      234,
      304372,
      68327,
      101456,
      131462,
      394383
    ],
    [
      235,
      330810,
      74262,
      86640,
      127072,
      381216
    ],
    [
      240,
      198794,
      31239,
      437346,
      83156,
      249465
    ],
    [
      241,
      260224,
      40892,
      260223,
      109667,
      328994
    ],
    [
      242,
      294945,
      46348,
      190847,
      116966,
      350894
    ],
    [
      243,
      322427,
      50667,
      147778,
      119782,
      359346
    ],
    [
      244,
      348604,
      54780,
      116200,
      120105,
      360311
    ],
    [
      245,
      373935,
      58761,
      97934,
      117344,
      352026
    ],
    [
      250,
      218694,
      24299,
      481125,
      68971,
      206911
    ],
    [
      251,
      293678,
      32631,
      293677,
      95004,
      285010
    ],
    [
      252,
      333416,
      37046,
      215739,
      103450,
      310349
    ],
    [
      253,
      363432,
      40381,
      166572,
      107404,
      322211
    ],
    [
      254,
      390777,
      43419,
      130258,
      108887,
      326659
    ],
    [
      255,
      415482,
      46165,
      108816,
      107385,
      322152
    ],
    [
      260,
      236830,
      19296,
      521024,
      55713,
      167137
    ],
    [
      261,
      326732,
      26622,
      326731,
      79979,
      239936
    ],
    [
      262,
      372814,
      30376,
      241232,
      88895,
      266683
    ],
    [
      263,
      406363,
      33110,
      186249,
      93570,
      280708
    ],
    [
      264,
      435586,
      35491,
      145194,
      95933,
      287796
    ],
    [
      265,
      459960,
      37477,
      120465,
      95525,
      286573
    ],
    [
      270,
      251662,
      14570,
      553655,
      45029,
      135084
    ],
    [
      271,
      355861,
      20602,
      355860,
      66921,
      200756
    ],
    [
      272,
      408845,
      23670,
      264547,
      75735,
      227203
    ],
    [
      273,
      446593,
      25855,
      204687,
      80716,
      242149
    ],
    [
      274,
      478346,
      27694,
      159447,
      83629,
      250884
    ],
    [
      275,
      503112,
      29128,
      131766,
      83998,
      251996
    ],
    [
      300,
      76362,
      143178,
      229085,
      137844,
      413531
    ],
    [
      301,
      95554,
      179163,
      130300,
      148747,
      446236
    ],
    [
      302,
      112998,
      211869,
      99703,
      143858,
      431572
    ],
    [
      303,
      128346,
      240647,
      80215,
      137699,
      413093
    ],
    [
      304,
      143930,
      269867,
      65422,
      130195,
      390586
    ],
    [
      305,
      160390,
      300731,
      57282,
      120400,
      361197
    ],
    [
      310,
      98148,
      81790,
      294445,
      131405,
      394212
    ],
    [
      311,
      123400,
      102832,
      168271,
      151375,
      454122
    ],
    [
      312,
      144109,
      120089,
      127153,
      152163,
      456486
    ],
    [
      313,
      162682,
      135567,
      101675,
      150020,
      450056
    ],
    [
      314,
      182054,
      151711,
      82751,
      145872,
      437612
    ],
    [
      315,
      203058,
      169215,
      72521,
      138802,
      416404
    ],
    [
      320,
      118311,
      57246,
      354930,
      117379,
      352134
    ],
    [
      321,
      150570,
      72856,
      205321,
      142814,
      428439
    ],
    [
      322,
      173603,
      84001,
      153178,
      147306,
      441912
    ],
    [
      323,
      193785,
      93766,
      121115,
      147834,
      443500
    ],
    [
      324,
      214617,
      103846,
      97552,
      145998,
      437987
    ],
    [
      325,
      236891,
      114624,
      84604,
      140971,
      422910
    ],
    [
      330,
      137672,
      42144,
      413015,
      101794,
      305375
    ],
    [
      331,
      178998,
      54795,
      244087,
      130531,
      391589
    ],
    [
      332,
      205007,
      62757,
      180888,
      137838,
      413510
    ],
    [
      333,
      226851,
      69444,
      141781,
      140483,
      421441
    ],
    [
      334,
      248747,
      76147,
      113066,
      140511,
      421529
    ],
    [
      335,
      271308,
      83053,
      96895,
      137187,
      411557
    ],
    [
      340,
      156357,
      33504,
      469069,
      85268,
      255802
    ],
    [
      341,
      209112,
      44809,
      285152,
      115232,
      345695
    ],
    [
      342,
      239250,
      51267,
      211102,
      124596,
      373785
    ],
    [
      343,
      263288,
      56418,
      164554,
      128936,
      386804
    ],
    [
      344,
      286338,
      61357,
      130152,
      130539,
      391614
    ],
    [
      345,
      308699,
      66149,
      110250,
      128726,
      386176
    ],
    [
      350,
      171771,
      26025,
      515311,
      71724,
      215169
    ],
    [
      351,
      236385,
      35815,
      322341,
      101366,
      304093
    ],
    [
      352,
      271522,
      41139,
      239577,
      111941,
      335821
    ],
    [
      353,
      298447,
      45219,
      186529,
      117452,
      352353
    ],
    [
      354,
      323202,
      48970,
      146909,
      120230,
      360689
    ],
    [
      355,
      345693,
      52378,
      123462,
      119617,
      358850
    ],
    [
      360,
      186137,
      20682,
      558410,
      58693,
      176078
    ],
    [
      361,
      264057,
      29339,
      360076,
      86634,
      259894
    ],
    [
      362,
      305501,
      33944,
      269558,
      97750,
      293247
    ],
    [
      363,
      336289,
      37365,
      210180,
      104042,
      312124
    ],
    [
      364,
      363466,
      40385,
      165210,
      107735,
      323204
    ],
    [
      365,
      386397,
      42933,
      137999,
      108168,
      324503
    ],
    [
      370,
      198160,
      15644,
      594477,
      47930,
      143789
    ],
    [
      371,
      289124,
      22825,
      394258,
      73449,
      220344
    ],
    [
      372,
      337523,
      26646,
      297813,
      84505,
      253513
    ],
    [
      373,
      372871,
      29437,
      233044,
      91162,
      273486
    ],
    [
      374,
      403180,
      31830,
      183263,
      95432,
      286295
    ],
    [
      375,
      427124,
      33720,
      152544,
      96654,
      289958
    ]
  ]

  function formatLayerString(str) {
    str = String(str);
    return '000'.substring(0, 3 - str.length) + str
  }
  var layerString = formatLayerString(qs.l || '');
  var app = new Vue({
    el: '#app',
    data: {
      client_seed: qs.c || '',
      server_seed: qs.s || '',
      server_seed_hash: qs.h || '',
      layers: [parseInt(layerString[0]), parseInt(layerString[1]), parseInt(layerString[2])],
      nonce: parseInt(qs.n) || 0,
      house_edge: qs.he || '1',
      luckyIndex: -1,
      // layerData: data,
    },
    computed: {
      layerData() {
        return this.house_edge === '4' ? data96 : data;
      },
      layer() {
        return this.layers[0] * 100 + this.layers[1] * 10 + this.layers[2];
      },
      result_hash() {
        return String(this.hmac_sha512(this.client_seed + ":" + this.nonce, this.server_seed));
      },
      layerInfo() {
        var arr = this.layerData.find(item => item[0] == this.layer).slice(1);
        var index = 0, i = 0;
        var num;
        var res = [];
        while (num = arr.shift()) {
          if (this.lucky >= index && this.lucky < index + num) {
            this.luckyIndex = i;
          }
          res.push([
            num,
            [index, index + num]
          ]);
          i++;
          index += num;
        }
        return res;
      },
      lucky() {
        var index = 0;
        do {
          var lucky = parseInt(this.result_hash.substr(index, 5), 16);
          index += 5;
        } while (lucky >= 1e6);
        return lucky;
      },
      top_lucky() {
        return parseInt(this.result_hash.substr(0, 10), 16) % 5;
      },
      isTop() {
        return Math.floor((this.layer % 100) / 10) == 7 && this.luckyIndex == 1;
      }
    },
    watch: {
      'this.lucky'() {
        ga('send', 'event', 'Slot', 'verify', this.server_seed, { metric0: this.client_seed, metric1: this.nonce })
      }
    },
    mounted() {
      if (location.hash == '#probability') {
        setTimeout(() => {
          (document.scrollingElement || document.documentElement).scrollTop = document.getElementById('probability').offsetTop - 100;
        }, 200);
      }
    },
    methods: {
      hmac_sha512(msg, salt) {
        return CryptoJS.HmacSHA512(msg, salt);
      },
      sha256(value) {
        return CryptoJS.SHA256(CryptoJS.enc.Utf8.parse(value));
      },
      sha512(value) {
        return CryptoJS.SHA512(CryptoJS.enc.Utf8.parse(value));
      },
      parseInt(value) {
        return window.parseInt(value, 16);
      },
      formatLayerString: formatLayerString
    }
  });

</script>
